---
import { Image } from "astro:assets";
import { getEntry } from "astro:content";
import { concatWithBase } from "@utils/concatWithBase";

const sponsors = await getEntry("sponsors", "data");
---

<div class="container">
  <h2 class="text-center">Sponsors</h2>
  {
    sponsors.data.map((sponsor) => (
      <div class="row">
        <div class="sponsor">
          {sponsor.class === "Platinum Gold" || sponsor.class === "Gold" ? (
            <a href={concatWithBase(`sponsors/${sponsor.id}`)}>
              <Image
                src={concatWithBase(sponsor.image)}
                width="320"
                height="240"
                loading="lazy"
                alt={sponsor.name}
              />
            </a>
          ) : (
            <Image
              src={concatWithBase(sponsor.image)}
              width="320"
              height="240"
              loading="lazy"
              alt={sponsor.name}
            />
          )}
          {sponsor.name} ({sponsor.class})
        </div>
      </div>
    ))
  }
</div>

<style>
  .container {
    margin-top: 2rem;
  }
  .sponsor a {
    display: block;
  }
  .sponsor img {
    object-fit: contain;
  }
</style>
